!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define("mlpChart",["d3"],e):"object"==typeof exports?exports.mlpChart=e(require("d3")):t.mlpChart=e(t.d3)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="/lib/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){(function(e){"use strict";var r=n(3),a=n(16),i=n(22);n(25),t.exports=function(t){function n(){var t=o.style("width"),e=o.style("height");Number(t.split("px")[0]),Number(e.split("px")[0]);s=o.append("svg").attr({id:"mlpChart-"+u,width:t,height:e,"class":"mlpChart"}),c=s.append("defs")}if("undefined"==typeof e)return void console.error("缺少d3.js");if("undefined"==typeof _)return void console.error("缺少工具类, underscore.js");var i=_.extend({},r),l=[],o=null,s=null,c=null,u=t.id?t.id:_.now();return t&&t.wrapContainer&&e.select(t.wrapContainer).node()?(o=e.select(t.wrapContainer),n(),i.utils=a,i.config={dataset:l,wrapContainer:o,svgContainer:s,defContainer:c,chartId:u},i.api=null,a.chartApiList.push(i),i):void console.error("no container, 缺少必要参数")},t.exports.utils=a,t.exports.VERSION="1.0,0",t.exports.D3VERSION=e.version,t.exports.LANGUAGE=i}).call(e,n(2))},function(e,n){e.exports=t},function(t,e,n){"use strict";t.exports={realTimeLineChart:n(4)}},function(t,e,n){(function(e){"use strict";var r=n(5);n(7);var a=function(){function t(){m.dataset}function a(){function n(){var t=[],n=[];_.map(b,function(e,r){t.push(e.name),n.push(k(r))}),W=d.defaultLegend.call(N,{type:"ordinal",position:m.legendPosition,scale_domain:t,scale_range:n,classPrefix:"realTimeLine",orient:m.legendOriention,cellclick:function(t,n,r){e.select(this).classed("hide")?(e.select(this).classed("hide",!1),P.selectAll("g.entity").each(function(n){n.name===t&&e.select(this).style("opacity","1")})):(e.select(this).classed("hide",!0),P.selectAll("g.entity").each(function(n){n.name===t&&e.select(this).style("opacity","0.1")}))},cellover:function(t){P.selectAll("g.entity").each(function(e){e.name===t&&l.call(this)})},cellout:function(t){P.selectAll("g.entity").each(function(e){e.name===t&&i.call(this)})}})}function a(t){var e=[];_.each(b,function(t){e=e.concat(t.data)});var n=[_.min(e,function(t){return t.x}).x,_.max(e,function(t){return t.x}).x];I=e.length/b.length>L;var r=A+A*(I?1/L:0),a=[0,_.max(e,function(t){return t.y}).y*m.yPadding],i={domainX:n,domainY:a,rangeX:[0,r],rangeY:[C,0],tickFormat:[function(t){return h.utils.dateFormat(t)},null],animation:[I?function(t){t.transition().duration(m.updateAnimationTime-30).ease("linear").call(S.xaxis)}:null,function(t){t.transition().duration(500).call(S.yaxis)}]};return"update"===t?S.api.updateAxis(i):u.call(N,i)}function i(){e.select(this).select("path").attr({"stroke-width":"2px",opacity:.8}),e.select(this).selectAll("circle").attr("r",3)}function l(){e.select(this).select("path").attr({"stroke-width":"4px",opacity:.9}),e.select(this).selectAll("circle").attr("r",5)}function o(){var t=null;P.selectAll("g.entity").each(function(n,a){var i=e.select(this).selectAll("circle").data(n.data);i.attr({cx:function(t,e){return S.x(t.x)},cy:function(t,e){return S.y(t.y)}}).enter().append("circle").attr({r:3,cx:function(t,e){return S.x(t.x)},cy:function(t,e){return S.y(t.y)},cursor:"pointer",fill:k(a)}).on("mouseover",function(e){m.tooltip&&(t=r().attr("class","d3-tip").html(function(t){var e="";return _.map(t.tip,function(t,n){e+="<div style='margin: 3px 0;'>"+n+" : "+t+"</div>"}),e}).offset(function(t){return[-10,0]}),P.call(t),t.show(e))}).on("mouseout",function(){m.tooltip&&t&&t.destroy()}),i.exit().remove()})}function s(){S=a("update"),P.selectAll("g.entity").data(m.dataset).select("path").attr({d:function(t,e){return B(t.data)}}),o(),I&&c()}function c(){P.selectAll("g.entity").attr("transform","translate(0,0)").transition().duration(m.updateAnimationTime-30).ease("linear").attr("transform","translate("+-A/(L-1)+",0)").each("end",function(t,e){for(;t.data.length>L;)t.data.shift()})}function p(){N.remove(),S=null,W=null,M=null}function g(t){if(t===!0)m.enableUpdate=!0;else{if(t!==!1)return m.enableUpdate;m.enableUpdate=!1}}var y=m.svgContainer,v=m.defContainer,b=m.dataset,w=h.utils.svgContainerProperties.call(h),T=m.margin,A=w.w-(T[1]+T[3]),C=w.h-(T[0]+T[2]),k=m.color,L=m.maxNode,S=null,I=!1,W=null,M=null;m.dataReady||t();var N=y.append("g").attr("class","chartWrap").attr("transform","translate("+T[1]+","+T[0]+")");N.append("rect").attr({width:A,height:C,x:0,y:0,fill:"transparent","class":"mlpChart-bg"}),m.legend&&n(),S=a(),S.api.drawAxis({xAttr:{transform:"translate(0,"+S.y(0)+")"},yAttr:{transform:"translate(0,0)"}});var F="clip_"+_.uniqueId();v.append("clipPath").attr({id:F}).append("rect").attr({height:C,width:A,x:1,y:0});var B=null;B="area"===m.fillType?e.svg.area().interpolate(m.interpolate).x(function(t,e){return S.x(t.x)}).y0(S.y(0)).y1(function(t,e){return S.y(t.y)}):e.svg.line().interpolate(m.interpolate).x(function(t,e){return S.x(t.x)}).y(function(t,e){return S.y(t.y)});var P=N.append("g").attr({"class":"chartContent","clip-path":"url(#"+F+")"});return P.selectAll("g.entity").data(b).enter().append("g").attr({"class":"entity"}).on("mouseover",l).on("mouseout",i).append("path").attr({d:function(t,e){return B(t.data)},stroke:function(t,e){return k(e)},fill:function(t,e){return"area"===m.fillType?k(e):"none"},"stroke-width":"2px",opacity:.8}),m.dotPoints&&o(),m.brushModule&&(M||(M=f.call(N,{api:h}).on("brushDataFormat",function(t,e){e||(e=t);var n=[];_.each(b,function(t){n=n.concat(_.pluck(t.data,"x"))});var r=h.utils.findCloestNumber.call(n,S.x.invert(t),">"),a=h.utils.findCloestNumber.call(n,S.x.invert(e),"<"),i=S.x(r),l=S.x(a);return{startText:h.utils.dateFormat(r,"yyyy-MM-dd hh:mm:ss"),startWidth:i,endText:h.utils.dateFormat(a,"yyyy-MM-dd hh:mm:ss"),endWidth:l,rangeText:h.utils.dataFormatRange(a-r)}})),M.init()),x={update:s,remove:p,dataUpdateStatus:g,legendApi:W},h}function i(t){if(x){if(!x.dataUpdateStatus())return void console.info("当前图表禁止向其添加数据");var e=m.dataset;if(t.length==e.length)return _.each(t,function(t,n){e[n].data.push(t)}),x.update(),this}}function l(){return x&&x.remove(),a()}function o(){return x&&l(),this}function s(){return m}function c(t){return t=t?t:{},m=_.extend({},m,t),this}var u=n(8),d=n(9),f=n(14),h=this,p=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{},g={dataReady:!!p.dataset,margin:[0,60,25,0],maxNode:20,updateAnimationTime:2e3,color:e.scale.category10(),tooltip:!0,yPadding:1.1,fillType:"line",interpolate:"linear",dotPoints:!0,legend:!0,legendPosition:"zs",legendOriention:"vertical",brushModule:!1,enableUpdate:!0},m=h.utils.mergeConfig.call(h,h.config,g,p),x=null;return h.api={draw:a,update:i,redraw:l,resize:o,getConfig:s,setConfig:c},h};t.exports=a}).call(e,n(2))},function(t,e,n){(function(e){"use strict";n(6),t.exports=function(){function t(t){_=g(t),T=_.createSVGPoint(),document.body.appendChild(w)}function n(){return"n"}function r(){return[0,0]}function a(){return" "}function i(){var t=x();return{top:t.n.y-w.offsetHeight,left:t.n.x-w.offsetWidth/2}}function l(){var t=x();return{top:t.s.y,left:t.s.x-w.offsetWidth/2}}function o(){var t=x();return{top:t.e.y-w.offsetHeight/2,left:t.e.x}}function s(){var t=x();return{top:t.w.y-w.offsetHeight/2,left:t.w.x-w.offsetWidth}}function c(){var t=x();return{top:t.nw.y-w.offsetHeight,left:t.nw.x-w.offsetWidth}}function u(){var t=x();return{top:t.ne.y-w.offsetHeight,left:t.ne.x}}function d(){var t=x();return{top:t.sw.y,left:t.sw.x-w.offsetWidth}}function f(){var t=x();return{top:t.se.y,left:t.e.x}}function h(t,n,r,a){function i(){e.event.x<=l/2&&(a+=l/2-e.event.x),e.event.y-20<=o&&(r+=o-e.event.y+20),s-e.event.x-20<=l/2&&(a-=l/2-s+e.event.x+20)}var l=Number(t.style("width").split("px")[0]),o=Number(t.style("height").split("px")[0]),s=Number(e.select("body").style("width").split("px")[0]);Number(e.select("body").style("height").split("px")[0]);switch(n){case"n":i()}return[r,a]}function p(){var t=e.select(document.createElement("div"));return t.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),t.node()}function g(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function m(){return null===w&&(w=p(),document.body.appendChild(w)),e.select(w)}function x(){for(var t=A||e.event.target;"undefined"==typeof t.getScreenCTM&&"undefined"===t.parentNode;)t=t.parentNode;var n={},r=t.getScreenCTM(),a=t.getBBox(),i=a.width,l=a.height,o=a.x,s=a.y;return T.x=o,T.y=s,n.nw=T.matrixTransform(r),T.x+=i,n.ne=T.matrixTransform(r),T.y+=l,n.se=T.matrixTransform(r),T.x-=i,n.sw=T.matrixTransform(r),T.y-=l/2,n.w=T.matrixTransform(r),T.x+=i,n.e=T.matrixTransform(r),T.x-=i/2,T.y-=l/2,n.n=T.matrixTransform(r),T.y+=l,n.s=T.matrixTransform(r),n}var y=n,v=r,b=a,w=p(),_=null,T=null,A=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(A=e.pop());var n,r=b.apply(this,e),a=y.apply(this,e),i=v.apply(this,e),l=m(),o=k.length,s=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;for(l.html(r).style({opacity:1,"pointer-events":"all"});o--;)l.classed(k[o],!1);n=C.get(a).call(this,l);var u=n.top+i[0]+s,d=n.left+i[1]+c,f=h(l,a,u,d);return l.classed(a,!0).style({top:f[0]+"px",left:f[1]+"px"}),t},t.hide=function(){var e=m();return e.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(n,r){if(arguments.length<2&&"string"==typeof n)return m().attr(n);var a=Array.prototype.slice.call(arguments);return e.selection.prototype.attr.apply(m(),a),t},t.style=function(n,r){if(arguments.length<2&&"string"==typeof n)return m().style(n);var a=Array.prototype.slice.call(arguments);return e.selection.prototype.style.apply(m(),a),t},t.direction=function(n){return arguments.length?(y=null==n?n:e.functor(n),t):y},t.offset=function(n){return arguments.length?(v=null==n?n:e.functor(n),t):v},t.html=function(n){return arguments.length?(b=null==n?n:e.functor(n),t):b},t.getNodeEl=function(){return m()},t.destroy=function(){return w&&(m().remove(),w=null),t};var C=e.map({n:i,s:l,e:o,w:s,nw:c,ne:u,sw:d,se:f}),k=C.keys();return t}}).call(e,n(2))},function(t,e){},function(t,e){},function(t,e,n){(function(e){"use strict";var n=function(){function t(){switch(c.axisType){case"linear":n()}}function n(){var t=c.domainX,n=c.domainY,r=c.rangeX,a=c.rangeY,l=e.scale.linear().domain(t).range(r),o=e.scale.linear().domain(n).range(a);i.x=l,i.y=o,i.xaxis=e.svg.axis().scale(l).orient(c.orient[0]).ticks(c.ticks[0]).tickFormat(c.tickFormat[0]),i.yaxis=e.svg.axis().scale(o).orient(c.orient[1]).ticks(c.ticks[1]).tickFormat(c.tickFormat[1])}function r(){var t=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{};return l.append("g").attr("class",c.xClass).attr(t.xAttr?_.extend(c.xAttr,t.xAttr):c.xAttr).call(i.xaxis),l.append("g").attr("class",c.yClass).attr(t.yAttr?_.extend(c.yAttr,t.yAttr):c.yAttr).call(i.yaxis),i}function a(){var e=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{};c=_.extend({},c,e),t();var n=l.select("g."+_.compact(c.xClass.split(" ")).join(".")),r=l.select("g."+_.compact(c.yClass.split(" ")).join("."));return c.animation[0]?c.animation[0].call(i,n):n.call(i.xaxis),c.animation[1]?c.animation[1].call(i,r):r.call(i.yaxis),i}var i={},l=this;l.empty()&&console.warn("can't find element to append axis, don't generate axis!");var o={ticks:[5,5],orient:["bottom","left"],tickFormat:[null,null],axisType:"linear",xClass:"x axis",yClass:"y axis",xAttr:{},yAttr:{},animation:[null,null],tableGrid:!1},s=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{},c=_.extend({},o,s);return t(),i.api={drawAxis:r,updateAxis:a},i};t.exports=n}).call(e,n(2))},function(t,e,n){(function(e){"use strict";function r(){function t(){var t=e.scale.ordinal().domain(s.scale_domain).range(s.scale_range),i=a().shape("path",e.svg.symbol().type("circle").size(150)()).shapePadding(s.shapePadding).labelOffset(s.labelOffset).classPrefix(s.classPrefix).orient(s.orient).scale(t).on("cellclick",s.cellclick).on("cellover",s.cellover).on("cellout",s.cellout);r.append("g").attr("class",s.legendClass).call(i),n()}function n(){function t(){p+=50,g+=10}function e(){g+=10,p+=d.width/2-h.width/2}function n(){p+=-20,g+=10,p+=d.width-h.width}function a(){p+=50,g+=d.height/2-h.height/2}function i(){p+=d.width/2-h.width/2,g+=d.height/2-h.height/2}function l(){p+=-20,g+=d.height/2-h.height/2,p+=d.width-h.width}function o(){p+=50,g+=-40,g+=d.height-h.height}function c(){g+=-40,p+=d.width/2-h.width/2,g+=d.height-h.height}function u(){p+=-20,g+=-40,p+=d.width-h.width,g+=d.height-h.height}var d=r.node().getBBox(),f=r.select("."+s.legendClass),h=f.node().getBBox(),p=s.transOffset[0],g=s.transOffset[1];switch(s.position){case"zs":t();break;case"s":e();break;case"ys":n();break;case"z":a();break;case"m":i();break;case"y":l();break;case"zx":o();break;case"x":c();break;case"yx":u();break;default:t()}f.attr("transform","translate("+p+","+g+")")}var r=this,i={};if(!r.empty()){var l={position:"zs",orient:"vertical",type:"ordinal",scale_domain:[],scale_range:[],shapePadding:5,labelOffset:5,transOffset:[0,0],classPrefix:null,cellclick:null,cellover:null,cellout:null,legendClass:"mlpLegend"},o=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{},s=_.extend({},l,o);switch(s.type){case"ordinal":t();break;default:console.log("undefined type",s.type)}return i.remove=function(){r.select("."+s.legendClass).remove()},i}}var a=n(10),i=n(12),l=n(13);t.exports={color:a,size:i,symbol:l,defaultLegend:r}}).call(e,n(2))},function(t,e,n){(function(e){"use strict";var r=n(11);t.exports=function(){function t(t){var e=r.d3_calcType(a,b,u,d,g,y),_=t.selectAll("g").data([a]);_.enter().append("g").attr("class",f+"legendCells");var T=_.selectAll("."+f+"cell").data(e.data),A=T.enter().append("g",".cell").attr("class",f+"cell").style("opacity",1e-6),C=(A.append(i).attr("class",f+"swatch"),T.select("g."+f+"cell "+i));r.d3_addEvents(A,w),T.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(i,C,o,l,s,n),r.d3_addText(_,A,e.labels,f);var k=T.select("text"),L=C[0].map(function(t){return t.getBBox()});h?C.attr("class",function(t){return f+"swatch "+e.feature(t)}):"line"==i?C.style("stroke",e.feature):C.style("fill",e.feature);var S,I,W="start"==x?0:"middle"==x?.5:1;"vertical"===v?(S=function(t,e){return"translate(0, "+e*(L[e].height+c)+")"},I=function(t,e){return"translate("+(L[e].width+L[e].x+m)+","+(L[e].y+L[e].height/2+5)+")"}):"horizontal"===v&&(S=function(t,e){return"translate("+e*(L[e].width+c)+",0)"},I=function(t,e){return"translate("+(L[e].width*W+L[e].x)+","+(L[e].height+L[e].y+m+8)+")"}),r.d3_placement(v,T,S,k,I,x),r.d3_title(t,_,p,f),T.transition().style("opacity",1)}var n,a=e.scale.linear(),i="rect",l=15,o=15,s=10,c=2,u=[5],d=[],f="",h=!1,p="",g=e.format(".01f"),m=10,x="middle",y="to",v="vertical",b=!1,w=e.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(a=e,t):a},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(u=e),t):u},t.shape=function(e,r){return arguments.length?(("rect"==e||"circle"==e||"line"==e||"path"==e&&"string"==typeof r)&&(i=e,n=r),t):i},t.shapeWidth=function(e){return arguments.length?(l=+e,t):l},t.shapeHeight=function(e){return arguments.length?(o=+e,t):o},t.shapeRadius=function(e){return arguments.length?(s=+e,t):s},t.shapePadding=function(e){return arguments.length?(c=+e,t):c},t.labels=function(e){return arguments.length?(d=e,t):d},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(x=e),t):x},t.labelFormat=function(e){return arguments.length?(g=e,t):g},t.labelOffset=function(e){return arguments.length?(m=+e,t):m},t.labelDelimiter=function(e){return arguments.length?(y=e,t):y},t.useClass=function(e){return arguments.length?(e!==!0&&e!==!1||(h=e),t):h},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(v=e),t):v},t.ascending=function(e){return arguments.length?(b=!!e,t):b},t.classPrefix=function(e){return arguments.length?(f=e,t):f},t.title=function(e){return arguments.length?(p=e,t):p},e.rebind(t,w,"on"),t}}).call(e,n(2))},function(t,e){"use strict";t.exports={d3_identity:function(t){return t},d3_mergeLabels:function(t,e){if(0===e.length)return t;t=t?t:[];for(var n=e.length;n<t.length;n++)e.push(t[n]);return e},d3_linearLegend:function(t,e,n){var r=[];if(e.length>1)r=e;else for(var a=t.domain(),i=(a[a.length-1]-a[0])/(e-1),l=0;l<e;l++)r.push(a[0]+l*i);var o=r.map(n);return{data:r,labels:o,feature:function(e){return t(e)}}},d3_quantLegend:function(t,e,n){var r=t.range().map(function(r){var a=t.invertExtent(r);e(a[0]),e(a[1]);return e(a[0])+" "+n+" "+e(a[1])});return{data:t.range(),labels:r,feature:this.d3_identity}},d3_ordinalLegend:function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},d3_drawShapes:function(t,e,n,r,a,i){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",a):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",i)},d3_addText:function(t,e,n,r){e.append("text").attr("class",r+"label"),t.selectAll("g."+r+"cell text").data(n).text(this.d3_identity)},d3_calcType:function(t,e,n,r,a,i){var l=t.ticks?this.d3_linearLegend(t,n,a):t.invertExtent?this.d3_quantLegend(t,a,i):this.d3_ordinalLegend(t);return l.labels=this.d3_mergeLabels(l.labels,r),e&&(l.labels=this.d3_reverse(l.labels),l.data=this.d3_reverse(l.data)),l},d3_reverse:function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},d3_placement:function(t,e,n,r,a,i){e.attr("transform",n),r.attr("transform",a),"horizontal"===t&&r.style("text-anchor",i)},d3_addEvents:function(t,e){var n=this;t.on("mouseover.legend",function(t){n.d3_cellOver(e,t,this)}).on("mouseout.legend",function(t){n.d3_cellOut(e,t,this)}).on("click.legend",function(t){n.d3_cellClick(e,t,this)})},d3_cellOver:function(t,e,n){t.cellover.call(n,e)},d3_cellOut:function(t,e,n){t.cellout.call(n,e)},d3_cellClick:function(t,e,n){t.cellclick.call(n,e)},d3_title:function(t,e,n,r){if(""!==n){var a=t.selectAll("text."+r+"legendTitle");a.data([n]).enter().append("text").attr("class",r+"legendTitle"),t.selectAll("text."+r+"legendTitle").text(n);var i=t.select("."+r+"legendTitle").map(function(t){return t[0].getBBox().height})[0],l=-e.map(function(t){return t[0].getBBox().x})[0];e.attr("transform","translate("+l+","+(i+10)+")")}}}},function(t,e,n){(function(e){"use strict";var r=n(11);t.exports=function(){function t(t){var v=r.d3_calcType(a,x,s,c,f,g),b=t.selectAll("g").data([a]);b.enter().append("g").attr("class",u+"legendCells");var w=b.selectAll("."+u+"cell").data(v.data),_=w.enter().append("g",".cell").attr("class",u+"cell").style("opacity",1e-6),T=(_.append(i).attr("class",u+"swatch"),w.select("g."+u+"cell "+i));r.d3_addEvents(_,y),w.exit().transition().style("opacity",0).remove(),"line"===i?(r.d3_drawShapes(i,T,0,l),T.attr("stroke-width",v.feature)):r.d3_drawShapes(i,T,v.feature,v.feature,v.feature,n),r.d3_addText(b,_,v.labels,u);var A,C,k=w.select("text"),L=T[0].map(function(t,e){var n=t.getBBox(),r=a(v.data[e]);return"line"===i&&"horizontal"===m?n.height=n.height+r:"line"===i&&"vertical"===m&&(n.width=n.width),n}),S=e.max(L,function(t){return t.height+t.y}),I=e.max(L,function(t){return t.width+t.x}),W="start"==p?0:"middle"==p?.5:1;"vertical"===m?(A=function(t,n){var r=e.sum(L.slice(0,n+1),function(t){return t.height});return"translate(0, "+(r+n*o)+")"},C=function(t,e){return"translate("+(I+h)+","+(L[e].y+L[e].height/2+5)+")"}):"horizontal"===m&&(A=function(t,n){var r=e.sum(L.slice(0,n+1),function(t){return t.width});return"translate("+(r+n*o)+",0)"},C=function(t,e){return"translate("+(L[e].width*W+L[e].x)+","+(S+h)+")"}),r.d3_placement(m,w,A,k,C,p),r.d3_title(t,b,d,u),w.transition().style("opacity",1)}var n,a=e.scale.linear(),i="rect",l=15,o=2,s=[5],c=[],u="",d="",f=e.format(".01f"),h=10,p="middle",g="to",m="vertical",x=!1,y=e.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(a=e,t):a},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(s=e),t):s},t.shape=function(e,r){return arguments.length?("rect"!=e&&"circle"!=e&&"line"!=e||(i=e,n=r),t):i},t.shapeWidth=function(e){return arguments.length?(l=+e,t):l},t.shapePadding=function(e){return arguments.length?(o=+e,t):o},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(p=e),t):p},t.labelFormat=function(e){return arguments.length?(f=e,t):f},t.labelOffset=function(e){return arguments.length?(h=+e,t):h},t.labelDelimiter=function(e){return arguments.length?(g=e,t):g},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(m=e),t):m},t.ascending=function(e){return arguments.length?(x=!!e,t):x},t.classPrefix=function(e){return arguments.length?(u=e,t):u},t.title=function(e){return arguments.length?(d=e,t):d},e.rebind(t,y,"on"),t}}).call(e,n(2))},function(t,e,n){(function(e){"use strict";var r=n(11);t.exports=function(){function t(t){var b=r.d3_calcType(n,y,c,u,h,m),w=t.selectAll("g").data([n]);w.enter().append("g").attr("class",d+"legendCells");var _=w.selectAll("."+d+"cell").data(b.data),T=_.enter().append("g",".cell").attr("class",d+"cell").style("opacity",1e-6),A=(T.append(a).attr("class",d+"swatch"),_.select("g."+d+"cell "+a));r.d3_addEvents(T,v),_.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(a,A,l,i,o,b.feature),r.d3_addText(w,T,b.labels,d);var C,k,L=_.select("text"),S=A[0].map(function(t){return t.getBBox()}),I=e.max(S,function(t){return t.height}),W=e.max(S,function(t){return t.width}),M="start"==p?0:"middle"==p?.5:1;"vertical"===x?(C=function(t,e){return"translate(0, "+e*(I+s)+")"},k=function(t,e){return"translate("+(W+g)+","+(S[e].y+S[e].height/2+5)+")"}):"horizontal"===x&&(C=function(t,e){return"translate("+e*(W+s)+",0)"},k=function(t,e){return"translate("+(S[e].width*M+S[e].x)+","+(I+g)+")"}),r.d3_placement(x,_,C,L,k,p),r.d3_title(t,w,f,d),_.transition().style("opacity",1)}var n=e.scale.linear(),a="path",i=15,l=15,o=10,s=5,c=[5],u=[],d="",f="",h=e.format(".01f"),p="middle",g=10,m="to",x="vertical",y=!1,v=e.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(n=e,t):n},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(c=e),t):c},t.shapePadding=function(e){return arguments.length?(s=+e,t):s},t.labels=function(e){return arguments.length?(u=e,t):u},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(p=e),t):p},t.labelFormat=function(e){return arguments.length?(h=e,t):h},t.labelOffset=function(e){return arguments.length?(g=+e,t):g},t.labelDelimiter=function(e){return arguments.length?(m=e,t):m},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(x=e),t):x},t.ascending=function(e){return arguments.length?(y=!!e,t):y},t.classPrefix=function(e){return arguments.length?(d=e,t):d},t.title=function(e){return arguments.length?(f=e,t):f},e.rebind(t,v,"on"),t}}).call(e,n(2))},function(t,e,n){(function(e){"use strict";n(15),t.exports=function(){function t(){return y.style.left=m.e+document.body.scrollLeft+"px",y.style.top=m.f+document.body.scrollTop+"px",y.style.width=p+"px",y.innerHTML=c.brushTemplate(),x.select(".brush-left").attr("style","height:"+g+"px"),x.select(".brush-right").attr("style","height:"+g+"px"),f.node().style.cursor="crosshair",f.node().addEventListener("mousedown",r),f.node().addEventListener("mouseup",a),f.node().addEventListener("mousemove",n),document.addEventListener("mouseup",a),i}function n(){if(v){var t=event||window.event;if(!(t.x-m.e<0||t.x-m.e>p)){var e=y.querySelector(".brush-left"),n=y.querySelector(".brush-right"),r=Number(e.getAttribute("data-startpoint")),a=t.x-m.e,i=null;r<=a?(i=c.brushDataFormat(r,a),n.style.width=p-i.endWidth+"px"):(i=c.brushDataFormat(a,r),e.style.width=i.startWidth+"px",n.style.width=p-i.endWidth+"px"),e.innerHTML=c.brushLeftInnerTemplate({startText:i.startText,rangeText:i.rangeText,rangeWidth:i.endWidth-i.startWidth,rangeLeft:i.startWidth}),n.innerHTML=c.brushRightInnerTemplate({endText:i.endText})}}}function r(t){var e=t||window.event;if(!(e.x-m.e<0||e.x-m.e>p)){v=!0,y.setAttribute("class",c.brushClass+" "+c.brushingClass);var n=y.querySelector(".brush-left"),r=y.querySelector(".brush-right"),a=e.x-m.e,i=c.brushDataFormat(a);n.style.width=i.startWidth+"px",r.style.width=p-i.endWidth+"px",n.innerHTML=c.brushLeftInnerTemplate({startText:i.startText,rangeText:i.rangeText,rangeWidth:i.endWidth-i.startWidth,rangeLeft:i.startWidth}),r.innerHTML=c.brushRightInnerTemplate({endText:i.endText}),n.setAttribute("data-startpoint",""+a)}}function a(t){v=!1}var i={},l=this;if(!l.empty()){var o={brushStart:null,brushDone:null,brushMove:null,brushClass:"mlpBrush",brushingClass:"brushing",brushDataFormat:function(t,e){return e||(e=t+10),{startText:t+"px",startWidth:t,endText:e+"px",endWidth:e,rangeText:e-t+"px"}},brushTemplate:_.template("<div class='brush-left'></div><div class='brush-right'></div>"),brushLeftInnerTemplate:_.template("<span class='brushSpan'><%= startText %></span><span class='brushRangeSpan' style='width:<%= rangeWidth %>px;left:<%= rangeLeft %>px;'><%= rangeText %></span>"),brushRightInnerTemplate:_.template("<span class='brushSpan'><%= endText %></span>")},s=Array.prototype.slice.call(arguments)[0]?Array.prototype.slice.call(arguments)[0]:{},c=_.extend({},o,s);if(!c.api)return void console.log("无法找到api");var u=c.api,d=u.config.chartId,f=u.config.wrapContainer,h=l.select("rect.mlpChart-bg").node(),p=(h.ownerSVGElement,h.getBBox().width),g=h.getBBox().height,m=h.getScreenCTM(),x=null,y=null;e.select("#brush_"+d).empty()?(x=u.config.wrapContainer.append("div").attr({id:"brush_"+d,"class":c.brushClass}),y=x.node()):(x=e.select("#brush_"+d),y=x.node());var v=!1;return i.init=t,i.on=function(t,e){return"brushStart"===t&&(c.brushStart=e),"brushMove"===t&&(c.brushMove=e),"brushDone"===t&&(c.brushDone=e),"brushDataFormat"===t&&(c.brushDataFormat=e),i},i}}}).call(e,n(2))},function(t,e){},function(t,e,n){"use strict";var r=n(17),a=n(18),i=n(19),l=n(20),o=n(21),s=n(22);t.exports=_.extend({},r,a,i,l,o,s)},function(t,e){"use strict";t.exports={mergeConfig:function(){var t=Array.prototype.slice.call(arguments),e={};return _.each(t,function(t){e=_.extend(e,t)}),e},findCloestNumber:function(t,e){var n=this;if(this instanceof Array)return _.min(_.filter(n,function(n){return"<"===e?t<n:t>=n}),function(e){return Math.abs(t-e)})}}},function(t,e){"use strict";t.exports={chartApiList:[],getApiByChartId:function(t){var e=this.chartApiList;return _.find(e,function(e){return e.config.chartId==t})},getApiBySvgId:function(t){var e=this.chartApiList;return _.find(e,function(e){return e.config.svgContainer.attr("id")===t})}}},function(t,e){"use strict";t.exports={resize:function(){if(this.config){var t=this.config.wrapContainer,e=this.config.svgContainer,n=t.style("width"),r=t.style("height");e.attr({width:n,heightString:r}),this.api&&this.api.resize&&this.api.resize()}}}},function(t,e){"use strict";t.exports={svgContainerProperties:function(){if(this.config){var t=this.config.svgContainer,e=t.style("width"),n=t.style("height"),r=Number(e.split("px")[0]),a=Number(n.split("px")[0]);return{w:r,h:a,widthString:e,heightString:n}}}}},function(t,e){"use strict";t.exports={dateFormat:function(t,e){var n=this.getI18N().weekInfo,r=e?e:"hh:mm:ss",a=new Date(t);if(a){var i=a.getFullYear(),l=a.getMonth()+1,o=a.getDate(),s=(n[""+a.getDay()],a.getHours()),c=a.getMinutes(),u=a.getSeconds();a.getMilliseconds();switch(l=l>=10?l:"0"+l,o=o>=10?o:"0"+o,s=0===s?"00":s<=9?"0"+s:s,c=0===c?"00":c<=9?"0"+c:c,u=0===u?"00":u<=9?"0"+u:u,r){case"yyyy-MM-dd hh:mm:ss":return i+"-"+l+"-"+o+" "+s+":"+c+":"+u;case"MM:dd hh:mm:ss":return l+":"+o+" "+s+":"+c+":"+u;case"hh:mm:ss":return s+":"+c+":"+u;default:return s+":"+c+":"+u}}},dataFormatRange:function(t,e){t=Number(t);var n={days:!0,hours:!0,minutes:!0,seconds:!0,millSecond:!1},r=this.getI18N().timeInfo;if(e&&(n=_.extend({},n,e)),!t)return"invalid timeRange";var a=parseInt(t/864e5),i=t%864e5,l=parseInt(i/36e5);i%=36e5;var o=parseInt(i/6e4);i%=6e4;var s=parseInt(i/1e3),c=parseInt(i%1e3),u="";return a>0&&n.days&&(u+=a+r.day+" "),l>0&&n.hours&&(u+=l+r.hour+" "),o>0&&n.minutes&&(u+=o+r.minute+" "),s>0&&n.seconds&&(u+=s+r.second+" "),c>0&&n.millSecond&&(u+=c+r.millSecond+" "),u}}},function(t,e,n){"use strict";var r={zh:n(23),en:n(24)};t.exports={i18n:"zh",getI18N:function(t){var e=this.i18n;return t?r[e][t]:r[e]},setI18N:function(t){t!=this.i18n&&r[t]&&(this.i18n=t)}}},function(t,e){t.exports={weekInfo:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},timeInfo:{day:"天",hour:"小时",minute:"分钟",second:"秒",millSecond:"毫秒"}}},function(t,e){t.exports={weekInfo:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},timeInfo:{day:"day",hour:"hour",minute:"minute",second:"second",millSecond:"mileSecond"}}},function(t,e){}])});
//# sourceMappingURL=mlpChart.min.js.map